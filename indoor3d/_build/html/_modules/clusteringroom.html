
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clusteringroom &#8212; indoor3d 0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">indoor3d 0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">clusteringroom</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for clusteringroom</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pointcloud</span>
<span class="kn">import</span> <span class="nn">plane</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">namedtuple</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
<span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">ConvexHull</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">metrics</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<div class="viewcode-block" id="len_pcd"><a class="viewcode-back" href="../api/clusteringroom.len_pcd.html#clusteringroom.len_pcd">[docs]</a><span class="k">def</span> <span class="nf">len_pcd</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">pcd</span><span class="o">.</span><span class="n">points</span><span class="p">)</span></div>

<div class="viewcode-block" id="volume_pcd"><a class="viewcode-back" href="../api/clusteringroom.volume_pcd.html#clusteringroom.volume_pcd">[docs]</a><span class="k">def</span> <span class="nf">volume_pcd</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">hull</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">pcd</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hull</span><span class="o">.</span><span class="n">volume</span></div>

<div class="viewcode-block" id="area_pcd"><a class="viewcode-back" href="../api/clusteringroom.area_pcd.html#clusteringroom.area_pcd">[docs]</a><span class="k">def</span> <span class="nf">area_pcd</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">hull</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">pcd</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hull</span><span class="o">.</span><span class="n">area</span></div>

<div class="viewcode-block" id="clustering_pcd_return_pcd_clusters"><a class="viewcode-back" href="../api/clusteringroom.clustering_pcd_return_pcd_clusters.html#clusteringroom.clustering_pcd_return_pcd_clusters">[docs]</a><span class="k">def</span> <span class="nf">clustering_pcd_return_pcd_clusters</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">,</span> <span class="n">eps</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.02</span><span class="p">,</span>
                                       <span class="n">min_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">remove_noise</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> \
        <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clusterize a pointcloud and returns the list of the clusters as smaller pointclouds. If *remove_noise*</span>
<span class="sd">    is True, a tuple with two elements is returned: the first element is the previous mentioned list,</span>
<span class="sd">    and the second one the pointcloud containing the noise.</span>

<span class="sd">    :param pcd: The pointcloud to clusterize.</span>
<span class="sd">    :type pcd: o3d.geometry.PointCloud</span>
<span class="sd">    :param eps: Maximum distance between points of a cluster. Default value is 0.02.</span>
<span class="sd">    :type eps: float</span>
<span class="sd">    :param min_points: Minimum number of points in a cluster. Default value is 10.</span>
<span class="sd">    :type min_points: int</span>
<span class="sd">    :param remove_noise: If the points that are noise are returned.</span>
<span class="sd">    :type remove_noise: bool</span>
<span class="sd">    :return: List of clusters and, optionally, noise.</span>
<span class="sd">    :rtype: Tuple[List[o3d.geometry.PointCloud], Optional[o3d.geometry.PointCloud]]</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.8, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters, noise_cloud = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.8, min_points = 100, remove_noise = False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pcd</span><span class="o">.</span><span class="n">cluster_dbscan</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">eps</span><span class="p">,</span> <span class="n">min_points</span><span class="o">=</span><span class="n">min_points</span><span class="p">))</span>
    <span class="c1"># dictionary with the list of indices for each label</span>
    <span class="n">dict_label_to_indices</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
        <span class="n">dict_label_to_indices</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">noise_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
    <span class="n">list_clusters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">dict_label_to_indices</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">label</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">pcd_temp</span> <span class="o">=</span> <span class="n">pcd</span><span class="o">.</span><span class="n">select_by_index</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="n">dict_label_to_indices</span><span class="p">[</span><span class="n">label</span><span class="p">])</span>
            <span class="n">list_clusters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pcd_temp</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">noise_pcd</span> <span class="o">=</span> <span class="n">pcd</span><span class="o">.</span><span class="n">select_by_index</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="n">dict_label_to_indices</span><span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">remove_noise</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">list_clusters</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">list_clusters</span><span class="p">,</span> <span class="n">noise_pcd</span></div>

<div class="viewcode-block" id="sort_pcd_list_by_area_of_convex_hull"><a class="viewcode-back" href="../api/clusteringroom.sort_pcd_list_by_area_of_convex_hull.html#clusteringroom.sort_pcd_list_by_area_of_convex_hull">[docs]</a><span class="k">def</span> <span class="nf">sort_pcd_list_by_area_of_convex_hull</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param reverse:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.sort_pcd_list_by_area_of_convex_hull(list_clusters)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries([list_clusters[0]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pcd_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">area_pcd</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pcd_list</span></div>

<div class="viewcode-block" id="sort_pcd_list_by_volume_of_convex_hull"><a class="viewcode-back" href="../api/clusteringroom.sort_pcd_list_by_volume_of_convex_hull.html#clusteringroom.sort_pcd_list_by_volume_of_convex_hull">[docs]</a><span class="k">def</span> <span class="nf">sort_pcd_list_by_volume_of_convex_hull</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="n">pcd_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">volume_pcd</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pcd_list</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_in_ceiling"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_in_ceiling.html#clusteringroom.find_clusters_in_ceiling">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_in_ceiling</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                             <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                             <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_ceiling = clusteringroom.find_clusters_in_ceiling(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_ceiling)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_in_ceiling</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="n">distance_to_ceiling</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;ceiling&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">distance_to_ceiling</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">list_clusters_in_ceiling</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">list_clusters_in_ceiling</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_in_floor"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_in_floor.html#clusteringroom.find_clusters_in_floor">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_in_floor</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                           <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                           <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_floor = clusteringroom.find_clusters_in_floor(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_floor)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_in_floor</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="n">distance_to_floor</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;floor&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">distance_to_floor</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">list_clusters_in_floor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">list_clusters_in_floor</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="close_to_walls"><a class="viewcode-back" href="../api/clusteringroom.close_to_walls.html#clusteringroom.close_to_walls">[docs]</a><span class="k">def</span> <span class="nf">close_to_walls</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">,</span> <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                   <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;wall_1_1&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">or</span> \
           <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;wall_1_2&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">or</span> \
           <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;wall_2_1&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">or</span> \
           <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;wall_2_2&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">tolerance</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_in_wall"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_in_wall.html#clusteringroom.find_clusters_in_wall">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_in_wall</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                          <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                          <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_wall = clusteringroom.find_clusters_in_wall(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_wall)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_in_wall</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">close_to_walls</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
            <span class="n">list_clusters_in_wall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">list_clusters_in_wall</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_column_candidates"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_column_candidates.html#clusteringroom.find_clusters_column_candidates">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_column_candidates</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                                    <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                                    <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_column_candidates = clusteringroom.find_clusters_column_candidates(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_column_candidates)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_in_column_candidates</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="n">distance_to_ceiling</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;ceiling&quot;</span><span class="p">])</span>
        <span class="n">distance_to_floor</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;floor&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">distance_to_ceiling</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">and</span> <span class="n">distance_to_floor</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">list_clusters_in_column_candidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">list_clusters_in_column_candidates</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_open_door_candidates"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_open_door_candidates.html#clusteringroom.find_clusters_open_door_candidates">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_open_door_candidates</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                                       <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                                       <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_open_door_candidates = clusteringroom.find_clusters_open_door_candidates(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_open_door_candidates)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_in_open_door_candidates</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">area_pcd</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.0</span> <span class="ow">and</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;ceiling&quot;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">distance_to_floor</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;floor&quot;</span><span class="p">])</span>
            <span class="n">is_close_to_walls</span> <span class="o">=</span> <span class="n">close_to_walls</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">distance_to_floor</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">and</span> <span class="n">is_close_to_walls</span><span class="p">:</span>
                <span class="n">list_clusters_in_open_door_candidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">list_clusters_in_open_door_candidates</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_clusters_to_remove"><a class="viewcode-back" href="../api/clusteringroom.find_clusters_to_remove.html#clusteringroom.find_clusters_to_remove">[docs]</a><span class="k">def</span> <span class="nf">find_clusters_to_remove</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span>
                            <span class="n">planes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">plane</span><span class="o">.</span><span class="n">PlaneIndoor</span><span class="p">]],</span>
                            <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clusters to remove because they are not close to the walls or the ceiling; everything we</span>
<span class="sd">    are interested in have to be close to the ceiling or the walls.</span>

<span class="sd">    :param pcd_list:</span>
<span class="sd">    :param limits_room:</span>
<span class="sd">    :param tolerance:</span>
<span class="sd">    :return:</span>

<span class="sd">    :Example:</span>

<span class="sd">    ::</span>

<span class="sd">        &gt;&gt;&gt; import findroom</span>
<span class="sd">        &gt;&gt;&gt; import clusteringroom</span>
<span class="sd">        &gt;&gt;&gt; import os</span>
<span class="sd">        &gt;&gt;&gt; import open3d as o3d</span>
<span class="sd">        &gt;&gt;&gt; home_dir = os.getenv(&quot;HOME&quot;)</span>
<span class="sd">        &gt;&gt;&gt; pcd_filename = home_dir + &quot;/Lantegi/FEBRERO/Kubic_v2 - e1 - 2021-01-26-102719/voxelized2cm.pcd&quot;</span>
<span class="sd">        &gt;&gt;&gt; pcd = o3d.io.read_point_cloud(pcd_filename)</span>
<span class="sd">        &gt;&gt;&gt; plane_thickness = 0.05</span>
<span class="sd">        &gt;&gt;&gt; inside_room, raw_limits_room, limits_room, plane_models = findroom.find_room_in_hololens_pointcloud(pcd, distance_threshold=0.05, plane_thickness= plane_thickness)</span>
<span class="sd">        &gt;&gt;&gt; list_clusters = clusteringroom.clustering_pcd_return_pcd_clusters(inside_room, eps = 0.1, min_points = 100)</span>
<span class="sd">        &gt;&gt;&gt; clusters_in_open_door_candidates = clusteringroom.find_clusters_open_door_candidates(list_clusters, planes, tolerance = 0.1)</span>
<span class="sd">        &gt;&gt;&gt; o3d.visualization.draw_geometries(clusters_in_open_door_candidates)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_clusters_to_remove</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">get_distance_between_pointcloud_and_plane</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="s2">&quot;ceiling&quot;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mf">0.5</span> \
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">close_to_walls</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">planes</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">):</span>
            <span class="n">list_clusters_to_remove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">))</span>
            <span class="n">indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_clusters_to_remove</span><span class="p">,</span> <span class="n">indices</span></div>

<div class="viewcode-block" id="paint_list_of_clusters"><a class="viewcode-back" href="../api/clusteringroom.paint_list_of_clusters.html#clusteringroom.paint_list_of_clusters">[docs]</a><span class="k">def</span> <span class="nf">paint_list_of_clusters</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;tab20&quot;</span><span class="p">)</span>
    <span class="n">list_clusters_painted</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">):</span>
        <span class="n">new_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
        <span class="n">new_pcd</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;tab20&quot;</span><span class="p">)(</span><span class="n">index</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">list_clusters_painted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pcd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_clusters_painted</span></div>

<div class="viewcode-block" id="return_clusters_not_in_indices_list"><a class="viewcode-back" href="../api/clusteringroom.return_clusters_not_in_indices_list.html#clusteringroom.return_clusters_not_in_indices_list">[docs]</a><span class="k">def</span> <span class="nf">return_clusters_not_in_indices_list</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span> <span class="n">indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> \
        <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="n">list_clusters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">):</span>
        <span class="n">new_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">:</span>
            <span class="n">list_clusters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pcd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_clusters</span></div>

<div class="viewcode-block" id="from_list_clusters_to_pointcloud"><a class="viewcode-back" href="../api/clusteringroom.from_list_clusters_to_pointcloud.html#clusteringroom.from_list_clusters_to_pointcloud">[docs]</a><span class="k">def</span> <span class="nf">from_list_clusters_to_pointcloud</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">])</span> \
        <span class="o">-&gt;</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">:</span>
    <span class="n">new_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="n">pcd_list</span><span class="p">:</span>
        <span class="n">new_pcd</span> <span class="o">=</span> <span class="n">new_pcd</span> <span class="o">+</span> <span class="n">pcd</span>
    <span class="k">return</span> <span class="n">new_pcd</span></div>

<div class="viewcode-block" id="paint_red_clusters_in_indices_list_and_grey_the_others"><a class="viewcode-back" href="../api/clusteringroom.paint_red_clusters_in_indices_list_and_grey_the_others.html#clusteringroom.paint_red_clusters_in_indices_list_and_grey_the_others">[docs]</a><span class="k">def</span> <span class="nf">paint_red_clusters_in_indices_list_and_grey_the_others</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">],</span> <span class="n">indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> \
        <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="n">list_clusters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">pcd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pcd_list</span><span class="p">):</span>
        <span class="n">new_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">:</span>
            <span class="n">new_pcd</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_pcd</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
        <span class="n">list_clusters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pcd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_clusters</span></div>

<div class="viewcode-block" id="clustering_inside_room"><a class="viewcode-back" href="../api/clusteringroom.clustering_inside_room.html#clusteringroom.clustering_inside_room">[docs]</a><span class="k">def</span> <span class="nf">clustering_inside_room</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">]:</span>
    <span class="k">pass</span></div>

<span class="c1"># def get_clustering_value_and_labels(data: np.ndarray, k: int) -&gt; float:</span>
<span class="c1">#     scaler = StandardScaler()</span>
<span class="c1">#     scaler.fit(data)</span>
<span class="c1">#     data = scaler.transform(data)</span>
<span class="c1">#     kmeans_model = KMeans(n_clusters=k, random_state=1).fit(data)</span>
<span class="c1">#     labels = kmeans_model.labels_</span>
<span class="c1">#     v = metrics.silhouette_score(data, labels, metric=&#39;euclidean&#39;)</span>
<span class="c1">#     return v, labels</span>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="find_best_initial_sublist_for_clustering_and_cluster_it"><a class="viewcode-back" href="../api/clusteringroom.find_best_initial_sublist_for_clustering_and_cluster_it.html#clusteringroom.find_best_initial_sublist_for_clustering_and_cluster_it">[docs]</a><span class="k">def</span> <span class="nf">find_best_initial_sublist_for_clustering_and_cluster_it</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]:</span>
    <span class="c1"># it compares with clustering with k + 1 and checks which one is better</span>
    <span class="c1"># looks for the maximum drop in the sum of v(k) and v(k)-v(k+1), so it combines</span>
    <span class="c1"># how good is the clustering with how better than the alternative is that same clustering</span>
    <span class="c1"># l = [[1.3],[1.4],[1.5],[3.4],[3.5],[3.6],[3.7], [2.5], [3.5]]</span>
    <span class="c1"># len(l) &gt; k + 1 for silhouette to work</span>

    <span class="k">def</span> <span class="nf">get_clustering_value_and_labels</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
        <span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">data_transformed</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">kmeans_model</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;elkan&quot;</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data_transformed</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">kmeans_model</span><span class="o">.</span><span class="n">labels_</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">silhouette_score</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;euclidean&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">labels</span>

    <span class="k">if</span> <span class="n">max_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">max_length</span><span class="p">)</span>
    <span class="n">all_v</span>  <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">all_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">all_v_k_1</span>  <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">all_labels_k_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">l</span><span class="p">[:</span><span class="n">i</span><span class="p">])</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">get_clustering_value_and_labels</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
        <span class="n">v_k_1</span><span class="p">,</span> <span class="n">labels_k_1</span> <span class="o">=</span> <span class="n">get_clustering_value_and_labels</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># print (v, labels)</span>
        <span class="n">all_v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">all_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">all_v_k_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_k_1</span><span class="p">)</span>
        <span class="n">all_labels_k_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">labels_k_1</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">all_v</span><span class="p">)</span>
    <span class="c1"># print(a)</span>
    <span class="n">improvement_over_k_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_v</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_v_k_1</span><span class="p">)</span>
    <span class="c1"># print(improvement_over_k_1)</span>
    <span class="n">total_advantage_of_k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_v</span><span class="p">)</span> <span class="o">+</span> <span class="n">improvement_over_k_1</span>
    <span class="c1"># print(total_advantage_of_k)</span>
    <span class="n">drop_in_advantage</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">total_advantage_of_k</span><span class="p">)</span>
    <span class="c1"># print(drop_in_advantage)</span>
    <span class="n">index_max_drop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">drop_in_advantage</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">l</span><span class="p">[:</span><span class="n">index_max_drop</span> <span class="o">+</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span> <span class="n">all_labels</span><span class="p">[</span><span class="n">index_max_drop</span><span class="p">]</span></div>

<div class="viewcode-block" id="get_ceiling_and_floor_heights_from_two_lists"><a class="viewcode-back" href="../api/clusteringroom.get_ceiling_and_floor_heights_from_two_lists.html#clusteringroom.get_ceiling_and_floor_heights_from_two_lists">[docs]</a><span class="k">def</span> <span class="nf">get_ceiling_and_floor_heights_from_two_lists</span><span class="p">(</span><span class="n">l1</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">l2</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">step</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="c1"># those values are max_bounds, we have to find the minimum of the ceiling</span>
    <span class="c1"># and the maximum of the floor</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">l2</span><span class="p">):</span>
        <span class="n">ceiling_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="o">-</span> <span class="n">step</span> <span class="c1"># because it is a max_bound</span>
        <span class="n">floor_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ceiling_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span> <span class="o">-</span> <span class="n">step</span> <span class="c1"># because it is a max_bound</span>
        <span class="n">floor_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ceiling_height</span><span class="p">,</span> <span class="n">floor_height</span></div>

<span class="c1">#@profile</span>
<div class="viewcode-block" id="get_ceiling_and_floor"><a class="viewcode-back" href="../api/clusteringroom.get_ceiling_and_floor.html#clusteringroom.get_ceiling_and_floor">[docs]</a><span class="k">def</span> <span class="nf">get_ceiling_and_floor</span><span class="p">(</span><span class="n">pcd</span><span class="p">:</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">):</span>
    <span class="n">Data</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;Data&quot;</span><span class="p">,</span> <span class="s2">&quot;list_slice_values cluster_1 cluster_2 ceiling_height floor_height&quot;</span><span class="p">)</span>
    <span class="n">which_slices</span><span class="p">,</span> <span class="n">list_slice_values_ordered</span> <span class="o">=</span> <span class="n">pointcloud</span><span class="o">.</span><span class="n">cut_into_disjoint_slices_by_axis_pointcloud</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
    <span class="c1"># list_slice_values = np.array([[pcd_slice.get_max_bound()[axis]] for pcd_slice in list_slices])</span>
    <span class="c1">#list_slice_values = list_slice_values.reshape(-1, 1)</span>
    <span class="c1"># print(list_slice_values)</span>
    <span class="n">values</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">find_best_initial_sublist_for_clustering_and_cluster_it</span><span class="p">(</span><span class="n">list_slice_values_ordered</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">=</span> <span class="n">max_length</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="n">cluster_1</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">cluster_2</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">ceiling_height</span><span class="p">,</span> <span class="n">floor_height</span> <span class="o">=</span> <span class="n">get_ceiling_and_floor_heights_from_two_lists</span><span class="p">(</span><span class="n">cluster_1</span><span class="p">,</span> <span class="n">cluster_2</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Data</span><span class="p">(</span><span class="n">list_slice_values_ordered</span><span class="p">,</span> <span class="n">cluster_1</span><span class="p">,</span> <span class="n">cluster_2</span><span class="p">,</span> <span class="n">ceiling_height</span><span class="p">,</span> <span class="n">floor_height</span><span class="p">)</span></div>








</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">indoor3d 0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">clusteringroom</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, RSAIT.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>